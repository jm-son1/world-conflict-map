<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì„¸ê³„ ë¶„ìŸ ì§€ë„ ì˜ê²¬ ê³µìœ </title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
  body { margin:0; font-family: Arial, sans-serif; }
  h2 { margin: 10px; }
  #map { height: 55vh; }
  #panel { padding: 15px; }

  textarea {
    width: 100%;
    height: 70px;
    margin-top: 8px;
  }

  button {
    margin-top: 8px;
    padding: 8px 14px;
  }

  .comment {
    padding: 8px;
    margin-top: 6px;
    background: #f2f2f2;
    border-radius: 5px;
  }

  #newsLink {
    display: inline-block;
    margin-top: 6px;
    margin-bottom: 10px;
  }
</style>
</head>

<body>

<h2>ğŸŒ ì„¸ê³„ ë¶„ìŸ ì§€ì—­ ì˜ê²¬ ê³µìœ  ì§€ë„</h2>

<div id="map"></div>

<div id="panel">
  <h3 id="title">ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”</h3>
  <p id="desc"></p>

  <a id="newsLink" href="#" target="_blank" style="display:none;">
    ğŸ”— ê´€ë ¨ ë‰´ìŠ¤ ê¸°ì‚¬ ë³´ê¸°
  </a>

  <textarea id="commentInput" placeholder="ë‰´ìŠ¤ë¥¼ ì°¸ê³ í•´ ìì‹ ì˜ ì˜ê²¬ì„ ì‘ì„±í•˜ì„¸ìš”"></textarea><br>

  <button onclick="saveComment()">ì˜ê²¬ ë“±ë¡</button>

  <p>ì´ ì˜ê²¬ ìˆ˜: <span id="count">0</span></p>

  <div id="comments"></div>
</div>

<script>
  const map = L.map('map').setView([25, 20], 2);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Â© OpenStreetMap'
  }).addTo(map);

  /* ğŸ”½ ë¶„ìŸ ì§€ì—­ ë°ì´í„° */
  const regions = {
    ukraine: {
      name: "ìš°í¬ë¼ì´ë‚˜ ì „ìŸ",
      desc: "ëŸ¬ì‹œì•„ì˜ êµ°ì‚¬ ê°œì…ê³¼ êµ­ì œ ì§ˆì„œì— ë¯¸ì¹˜ëŠ” ì˜í–¥",
      lat: 48.5, lng: 31,
      news: "https://www.bbc.com/news/world-europe-60506682"
    },
    korea: {
      name: "í•œë°˜ë„ í•µ ë¬¸ì œ",
      desc: "ë¶í•œì˜ í•µ ê°œë°œê³¼ ë™ë¶ì•„ ì•ˆë³´ í™˜ê²½",
      lat: 38, lng: 127,
      news: "https://www.bbc.com/news/world-asia-41228181"
    },
    israel: {
      name: "ì´ìŠ¤ë¼ì—˜-íŒ”ë ˆìŠ¤íƒ€ì¸ ë¶„ìŸ",
      desc: "ì˜í† ì™€ ë¯¼ì¡± ìê²°ê¶Œì„ ë‘˜ëŸ¬ì‹¼ ì¥ê¸°ì  ê°ˆë“±",
      lat: 31.5, lng: 35,
      news: "https://www.bbc.com/news/world-middle-east-67039975"
    },
    taiwan: {
      name: "ëŒ€ë§Œ í•´í˜‘ ê¸´ì¥",
      desc: "í•˜ë‚˜ì˜ ì¤‘êµ­ ì›ì¹™ê³¼ ëŒ€ë§Œì˜ ì •ì¹˜ì  ì§€ìœ„ ë¬¸ì œ",
      lat: 23.7, lng: 121,
      news: "https://www.bbc.com/news/world-asia-34729538"
    }
  };

  let currentKey = null;

  Object.keys(regions).forEach(key => {
    const r = regions[key];
    L.marker([r.lat, r.lng])
      .addTo(map)
      .on('click', () => selectRegion(key));
  });

  function selectRegion(key) {
    currentKey = key;

    document.getElementById('title').innerText = regions[key].name;
    document.getElementById('desc').innerText = regions[key].desc;

    const link = document.getElementById('newsLink');
    link.href = regions[key].news;
    link.style.display = "inline-block";

    loadComments();
  }

  function saveComment() {
    if (!currentKey) {
      alert("ì§€ì—­ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”");
      return;
    }

    const text = document.getElementById('commentInput').value;
    if (!text) return;

    const data = JSON.parse(
      localStorage.getItem(currentKey) || '[]'
    );

    data.push(text);
    localStorage.setItem(currentKey, JSON.stringify(data));

    document.getElementById('commentInput').value = "";
    loadComments();
  }

  function loadComments() {
    const box = document.getElementById('comments');
    box.innerHTML = "";

    const data = JSON.parse(
      localStorage.getItem(currentKey) || '[]'
    );

    document.getElementById('count').innerText = data.length;

    data.forEach(c => {
      const div = document.createElement("div");
      div.className = "comment";
      div.innerText = c;
      box.appendChild(div);
    });
  }
</script>

</body>
</html>
